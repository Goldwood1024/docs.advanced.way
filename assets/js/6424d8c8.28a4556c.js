(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{147:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return i})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return s}));var r=t(3),o=t(7),a=(t(0),t(270)),l={title:"\u7ebf\u7a0b\u6c60"},i={unversionedId:"java/hc/\u7ebf\u7a0b\u6c60",id:"java/hc/\u7ebf\u7a0b\u6c60",isDocsHomePage:!1,title:"\u7ebf\u7a0b\u6c60",description:"\u7ebf\u7a0b\u6c60\u7b80\u4ecb",source:"@site/docs/java/hc/\u7ebf\u7a0b\u6c60.md",slug:"/java/hc/\u7ebf\u7a0b\u6c60",permalink:"/docs.advanced.way/docs/java/hc/\u7ebf\u7a0b\u6c60",editUrl:"https://github.com/Goldwood1024/docs.advanced.way/docs/docs/java/hc/\u7ebf\u7a0b\u6c60.md",version:"current",lastUpdatedAt:1616148576,formattedLastUpdatedAt:"3/19/2021",sidebar:"java",previous:{title:"\u5e76\u53d1\u5de5\u5177\u7c7b",permalink:"/docs.advanced.way/docs/java/hc/\u5e76\u53d1\u5de5\u5177\u7c7b"},next:{title:"\u9501",permalink:"/docs.advanced.way/docs/java/hc/\u9501"}},c=[{value:"\u7ebf\u7a0b\u6c60\u7b80\u4ecb",id:"\u7ebf\u7a0b\u6c60\u7b80\u4ecb",children:[{value:"Executor \u6846\u67b6",id:"executor-\u6846\u67b6",children:[]}]},{value:"\u67b6\u6784\u56fe",id:"\u67b6\u6784\u56fe",children:[{value:"\u6838\u5fc3\u7c7b",id:"\u6838\u5fc3\u7c7b",children:[]}]},{value:"ThreadPoolExecutor",id:"threadpoolexecutor",children:[{value:"\u7ed3\u6784\u56fe",id:"\u7ed3\u6784\u56fe",children:[]},{value:"\u6267\u884c\u6d41\u7a0b",id:"\u6267\u884c\u6d41\u7a0b",children:[]},{value:"ThreadPoolExecutor.class",id:"threadpoolexecutorclass",children:[]},{value:"Worker",id:"worker",children:[]},{value:"\u62d2\u7edd\u7b56\u7565",id:"\u62d2\u7edd\u7b56\u7565",children:[]},{value:"\u4efb\u52a1\u961f\u5217",id:"\u4efb\u52a1\u961f\u5217",children:[]},{value:"\u5408\u7406\u7684\u914d\u7f6e\u7ebf\u7a0b\u6c60",id:"\u5408\u7406\u7684\u914d\u7f6e\u7ebf\u7a0b\u6c60",children:[]}]},{value:"Executors",id:"executors",children:[{value:"FixedThreadPool",id:"fixedthreadpool",children:[]},{value:"SingleThreadExecutor",id:"singlethreadexecutor",children:[]},{value:"CachedThreadPool",id:"cachedthreadpool",children:[]},{value:"ScheduledThreadPool",id:"scheduledthreadpool",children:[]},{value:"WorkStealingPool",id:"workstealingpool",children:[]}]},{value:"Fork/Join \u6846\u67b6",id:"forkjoin-\u6846\u67b6",children:[{value:"Work-Stealing \u5de5\u4f5c\u7a83\u53d6\u7b97\u6cd5",id:"work-stealing-\u5de5\u4f5c\u7a83\u53d6\u7b97\u6cd5",children:[]},{value:"ForkJoinTask",id:"forkjointask",children:[]},{value:"ForkJoinPool.class",id:"forkjoinpoolclass",children:[]}]}],u={toc:c};function s(e){var n=e.components,l=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},u,l,{components:n,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"\u7ebf\u7a0b\u6c60\u7b80\u4ecb"},"\u7ebf\u7a0b\u6c60\u7b80\u4ecb"),Object(a.b)("p",null,"\u5728\u4f7f\u7528\u7ebf\u7a0b\u6c60\u4e4b\u540e\uff0c\u521b\u5efa\u7ebf\u7a0b\u53d8\u6210\u4e86\u4ece\u7ebf\u7a0b\u6c60\u83b7\u5f97\u7a7a\u95f2\u7ebf\u7a0b\uff0c\u5173\u95ed\u7ebf\u7a0b\u53d8\u6210\u4e86\u5411\u7ebf\u7a0b\u6c60\u5f52\u8fd8\u7ebf\u7a0b\u3002  "),Object(a.b)("p",null,"\u597d\u5904:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u964d\u4f4e\u8d44\u6e90\u6d88\u8017\u3002\u901a\u8fc7\u91cd\u590d\u5229\u7528\u5df2\u521b\u5efa\u7684\u7ebf\u7a0b\u964d\u4f4e\u7ebf\u7a0b\u521b\u5efa\u548c\u9500\u6bc1\u9020\u6210\u7684\u6d88\u8017\u3002"),Object(a.b)("li",{parentName:"ul"},"\u63d0\u9ad8\u54cd\u5e94\u901f\u5ea6\u3002\u5f53\u4efb\u52a1\u5230\u8fbe\u65f6\uff0c\u4efb\u52a1\u53ef\u4ee5\u4e0d\u9700\u8981\u7b49\u5230\u7ebf\u7a0b\u521b\u5efa\u5c31\u80fd\u7acb\u5373\u6267\u884c\u3002"),Object(a.b)("li",{parentName:"ul"},"\u63d0\u9ad8\u7ebf\u7a0b\u7684\u53ef\u7ba1\u7406\u6027\u3002\u7ebf\u7a0b\u662f\u7a00\u7f3a\u8d44\u6e90\uff0c\u5982\u679c\u65e0\u9650\u5236\u7684\u521b\u5efa\uff0c\u4e0d\u4ec5\u4f1a\u6d88\u8017\u7cfb\u7edf\u8d44\u6e90\uff0c\u8fd8\u4f1a\u964d\u4f4e\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\uff0c\u4f7f\u7528\u7ebf\u7a0b\u6c60\u53ef\u4ee5\u8fdb\u884c\u7edf\u4e00\u7684\u5206\u914d\uff0c\u8c03\u4f18\u548c\u76d1\u63a7\u3002")),Object(a.b)("h3",{id:"executor-\u6846\u67b6"},"Executor \u6846\u67b6"),Object(a.b)("p",null,"java\u7ebf\u7a0b\u88ab\u4e00\u5bf9\u4e00\u7684\u6620\u5c04\u6210\u672c\u5730\u64cd\u4f5c\u7cfb\u7edf\u7ebf\u7a0b\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8c03\u5ea6\u6240\u6709\u7684\u7ebf\u7a0b\u5e76\u5206\u914d\u53ef\u7528\u7684CPU."),Object(a.b)("h2",{id:"\u67b6\u6784\u56fe"},"\u67b6\u6784\u56fe"),Object(a.b)("p",null,Object(a.b)("img",{src:t(290).default})),Object(a.b)("h3",{id:"\u6838\u5fc3\u7c7b"},"\u6838\u5fc3\u7c7b"),Object(a.b)("h4",{id:"executorclass"},"Executor.class"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public interface Executor {\n    void execute(Runnable command);\n}\n")),Object(a.b)("p",null,"\u662f ",Object(a.b)("inlineCode",{parentName:"p"},"Executor")," \u6846\u67b6\u7684\u57fa\u7840\uff0c\u5c06\u4efb\u52a1\u7684\u63d0\u4ea4\u548c\u4efb\u52a1\u7684\u6267\u884c\u5206\u79bb\u5f00"),Object(a.b)("h4",{id:"executorserviceclass"},"ExecutorService.class"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public interface ExecutorService extends Executor {\n    /**\n     * \u5173\u95ed\u6267\u884c\u5668, \u4e3b\u8981\u6709\u4ee5\u4e0b\u7279\u70b9:\n     * 1. \u5df2\u7ecf\u63d0\u4ea4\u7ed9\u8be5\u6267\u884c\u5668\u7684\u4efb\u52a1\u5c06\u4f1a\u7ee7\u7eed\u6267\u884c, \u4f46\u662f\u4e0d\u518d\u63a5\u53d7\u65b0\u4efb\u52a1\u7684\u63d0\u4ea4;\n     * 2. \u5982\u679c\u6267\u884c\u5668\u5df2\u7ecf\u5173\u95ed\u4e86, \u5219\u518d\u6b21\u8c03\u7528\u6ca1\u6709\u526f\u4f5c\u7528.\n     */\n    void shutdown();\n    /**\n     * \u7acb\u5373\u5173\u95ed\u6267\u884c\u5668, \u4e3b\u8981\u6709\u4ee5\u4e0b\u7279\u70b9:\n     * 1. \u5c1d\u8bd5\u505c\u6b62\u6240\u6709\u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1, \u65e0\u6cd5\u4fdd\u8bc1\u80fd\u591f\u505c\u6b62\u6210\u529f, \u4f46\u4f1a\u5c3d\u529b\u5c1d\u8bd5(\u4f8b\u5982, \u901a\u8fc7 Thread.interrupt\u4e2d\u65ad\u4efb\u52a1, \u4f46\u662f\u4e0d\u54cd\u5e94\u4e2d\u65ad\u7684\u4efb\u52a1\u53ef\u80fd\u65e0\u6cd5\u7ec8\u6b62);\n     * 2. \u6682\u505c\u5904\u7406\u5df2\u7ecf\u63d0\u4ea4\u4f46\u672a\u6267\u884c\u7684\u4efb\u52a1;\n     *\n     * @return \u8fd4\u56de\u5df2\u7ecf\u63d0\u4ea4\u4f46\u672a\u6267\u884c\u7684\u4efb\u52a1\u5217\u8868\n     */\n    List<Runnable> shutdownNow();\n\n    // \u5982\u679c\u8be5\u6267\u884c\u5668\u5df2\u7ecf\u5173\u95ed, \u5219\u8fd4\u56detrue.\n    boolean isShutdown();\n\n    /**\n     * \u5224\u65ad\u6267\u884c\u5668\u662f\u5426\u5df2\u7ecf\u3010\u7ec8\u6b62\u3011.\n     * <p>\n     * \u4ec5\u5f53\u6267\u884c\u5668\u5df2\u5173\u95ed\u4e14\u6240\u6709\u4efb\u52a1\u90fd\u5df2\u7ecf\u6267\u884c\u5b8c\u6210, \u624d\u8fd4\u56detrue.\n     * \u6ce8\u610f: \u9664\u975e\u9996\u5148\u8c03\u7528 shutdown \u6216 shutdownNow, \u5426\u5219\u8be5\u65b9\u6cd5\u6c38\u8fdc\u8fd4\u56defalse.\n     */\n    boolean isTerminated();\n    // \u963b\u585e\u8c03\u7528\u7ebf\u7a0b, \u7b49\u5f85\u6267\u884c\u5668\u5230\u8fbe\u3010\u7ec8\u6b62\u3011\u72b6\u6001.\n    boolean awaitTermination(long timeout, TimeUnit unit)throws InterruptedException;\n\n    // \u63d0\u4ea4\u4e00\u4e2a\u5177\u6709\u8fd4\u56de\u503c\u7684\u4efb\u52a1\u7528\u4e8e\u6267\u884c.\n    <T> Future<T> submit(Callable<T> task);\n    // \u63d0\u4ea4\u4e00\u4e2a Runnable \u4efb\u52a1\u7528\u4e8e\u6267\u884c.\n    <T> Future<T> submit(Runnable task, T result);\n    // \u63d0\u4ea4\u4e00\u4e2a Runnable \u4efb\u52a1\u7528\u4e8e\u6267\u884c.\n    Future<?> submit(Runnable task);\n\n    // \u6267\u884c\u7ed9\u5b9a\u96c6\u5408\u4e2d\u7684\u6240\u6709\u4efb\u52a1, \u5f53\u6240\u6709\u4efb\u52a1\u90fd\u6267\u884c\u5b8c\u6210\u540e, \u8fd4\u56de\u4fdd\u6301\u4efb\u52a1\u72b6\u6001\u548c\u7ed3\u679c\u7684 Future \u5217\u8868.\n    <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks)\n        throws InterruptedException;\n\n    // \u6267\u884c\u7ed9\u5b9a\u96c6\u5408\u4e2d\u7684\u6240\u6709\u4efb\u52a1, \u5f53\u6240\u6709\u4efb\u52a1\u90fd\u6267\u884c\u5b8c\u6210\u540e\u6216\u8d85\u65f6\u671f\u6ee1\u65f6\uff08\u65e0\u8bba\u54ea\u4e2a\u9996\u5148\u53d1\u751f\uff09, \u8fd4\u56de\u4fdd\u6301\u4efb\u52a1\u72b6\u6001\u548c\u7ed3\u679c\u7684 Future \u5217\u8868\n    <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,\n                                  long timeout, TimeUnit unit)\n        throws InterruptedException;\n    // \u6267\u884c\u7ed9\u5b9a\u96c6\u5408\u4e2d\u7684\u4efb\u52a1, \u53ea\u6709\u5176\u4e2d\u67d0\u4e2a\u4efb\u52a1\u7387\u5148\u6210\u529f\u5b8c\u6210\uff08\u672a\u629b\u51fa\u5f02\u5e38\uff09, \u5219\u8fd4\u56de\u5176\u7ed3\u679c. \u4e00\u65e6\u6b63\u5e38\u6216\u5f02\u5e38\u8fd4\u56de\u540e, \u5219\u53d6\u6d88\u5c1a\u672a\u5b8c\u6210\u7684\u4efb\u52a1.\n    <T> T invokeAny(Collection<? extends Callable<T>> tasks)\n        throws InterruptedException, ExecutionException;\n\n    // \u6267\u884c\u7ed9\u5b9a\u96c6\u5408\u4e2d\u7684\u4efb\u52a1, \u5982\u679c\u5728\u7ed9\u5b9a\u7684\u8d85\u65f6\u671f\u6ee1\u524d, \u67d0\u4e2a\u4efb\u52a1\u5df2\u6210\u529f\u5b8c\u6210\uff08\u672a\u629b\u51fa\u5f02\u5e38\uff09, \u5219\u8fd4\u56de\u5176\u7ed3\u679c. \u4e00\u65e6\u6b63\u5e38\u6216\u5f02\u5e38\u8fd4\u56de\u540e, \u5219\u53d6\u6d88\u5c1a\u672a\u5b8c\u6210\u7684\u4efb\u52a1\n    <T> T invokeAny(Collection<? extends Callable<T>> tasks,\n                    long timeout, TimeUnit unit)\n        throws InterruptedException, ExecutionException, TimeoutException;\n}\n\n")),Object(a.b)("p",null,"\u7ee7\u627f Executor\uff0c\u589e\u5f3a\u4e86\u5bf9\u4efb\u52a1\u7684\u63a7\u5236\uff0c\u548c\u5bf9\u81ea\u8eab\u751f\u547d\u5468\u671f\u7684\u7ba1\u7406"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u5173\u95ed\u7ebf\u7a0b\u6c60"),Object(a.b)("li",{parentName:"ul"},"\u76d1\u89c6\u6267\u884c\u5668\u7684\u72b6\u6001"),Object(a.b)("li",{parentName:"ul"},"\u5bf9\u5f02\u6b65\u7684\u652f\u6301"),Object(a.b)("li",{parentName:"ul"},"\u5bf9\u6279\u5904\u7406\u4efb\u52a1\u7684\u652f\u6301")),Object(a.b)("h4",{id:"abstractexecutorserviceclass"},"AbstractExecutorService.class"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public abstract class AbstractExecutorService implements ExecutorService {\n    protected <T> RunnableFuture<T> newTaskFor(Runnable runnable, T value) {\n        return new FutureTask<T>(runnable, value);\n    }\n\n    protected <T> RunnableFuture<T> newTaskFor(Callable<T> callable) {\n        return new FutureTask<T>(callable);\n    }\n\n    public Future<?> submit(Runnable task) {\n        if (task == null) throw new NullPointerException();\n        RunnableFuture<Void> ftask = newTaskFor(task, null);\n        execute(ftask);\n        return ftask;\n    }\n\n    public <T> Future<T> submit(Runnable task, T result) {\n        if (task == null) throw new NullPointerException();\n        RunnableFuture<T> ftask = newTaskFor(task, result);\n        execute(ftask);\n        return ftask;\n    }\n\n    public <T> Future<T> submit(Callable<T> task) {\n        if (task == null) throw new NullPointerException();\n        RunnableFuture<T> ftask = newTaskFor(task);\n        execute(ftask);\n        return ftask;\n    }\n\n    private <T> T doInvokeAny(Collection<? extends Callable<T>> tasks,\n                              boolean timed, long nanos)\n        throws InterruptedException, ExecutionException, TimeoutException {\n        if (tasks == null)\n            throw new NullPointerException();\n        int ntasks = tasks.size();\n        if (ntasks == 0)\n            throw new IllegalArgumentException();\n        ArrayList<Future<T>> futures = new ArrayList<>(ntasks);\n        ExecutorCompletionService<T> ecs =\n            new ExecutorCompletionService<T>(this);\n        try {\n            // Record exceptions so that if we fail to obtain any\n            // result, we can throw the last exception we got.\n            ExecutionException ee = null;\n            final long deadline = timed ? System.nanoTime() + nanos : 0L;\n            Iterator<? extends Callable<T>> it = tasks.iterator();\n\n            // Start one task for sure; the rest incrementally\n            futures.add(ecs.submit(it.next()));\n            --ntasks;\n            int active = 1;\n\n            for (;;) {\n                Future<T> f = ecs.poll();\n                if (f == null) {\n                    if (ntasks > 0) {\n                        --ntasks;\n                        futures.add(ecs.submit(it.next()));\n                        ++active;\n                    }\n                    else if (active == 0)\n                        break;\n                    else if (timed) {\n                        f = ecs.poll(nanos, NANOSECONDS);\n                        if (f == null)\n                            throw new TimeoutException();\n                        nanos = deadline - System.nanoTime();\n                    }\n                    else\n                        f = ecs.take();\n                }\n                if (f != null) {\n                    --active;\n                    try {\n                        return f.get();\n                    } catch (ExecutionException eex) {\n                        ee = eex;\n                    } catch (RuntimeException rex) {\n                        ee = new ExecutionException(rex);\n                    }\n                }\n            }\n\n            if (ee == null)\n                ee = new ExecutionException();\n            throw ee;\n\n        } finally {\n            cancelAll(futures);\n        }\n    }\n\n    public <T> T invokeAny(Collection<? extends Callable<T>> tasks)\n        throws InterruptedException, ExecutionException {\n        try {\n            return doInvokeAny(tasks, false, 0);\n        } catch (TimeoutException cannotHappen) {\n            assert false;\n            return null;\n        }\n    }\n\n    public <T> T invokeAny(Collection<? extends Callable<T>> tasks,\n                           long timeout, TimeUnit unit)\n        throws InterruptedException, ExecutionException, TimeoutException {\n        return doInvokeAny(tasks, true, unit.toNanos(timeout));\n    }\n\n    public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks)\n        throws InterruptedException {\n        if (tasks == null)\n            throw new NullPointerException();\n        ArrayList<Future<T>> futures = new ArrayList<>(tasks.size());\n        try {\n            for (Callable<T> t : tasks) {\n                RunnableFuture<T> f = newTaskFor(t);\n                futures.add(f);\n                execute(f);\n            }\n            for (int i = 0, size = futures.size(); i < size; i++) {\n                Future<T> f = futures.get(i);\n                if (!f.isDone()) {\n                    try { f.get(); }\n                    catch (CancellationException | ExecutionException ignore) {}\n                }\n            }\n            return futures;\n        } catch (Throwable t) {\n            cancelAll(futures);\n            throw t;\n        }\n    }\n\n    public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,\n                                         long timeout, TimeUnit unit)\n        throws InterruptedException {\n        if (tasks == null)\n            throw new NullPointerException();\n        final long nanos = unit.toNanos(timeout);\n        final long deadline = System.nanoTime() + nanos;\n        ArrayList<Future<T>> futures = new ArrayList<>(tasks.size());\n        int j = 0;\n        timedOut: try {\n            for (Callable<T> t : tasks)\n                futures.add(newTaskFor(t));\n\n            final int size = futures.size();\n\n            // Interleave time checks and calls to execute in case\n            // executor doesn't have any/much parallelism.\n            for (int i = 0; i < size; i++) {\n                if (((i == 0) ? nanos : deadline - System.nanoTime()) <= 0L)\n                    break timedOut;\n                execute((Runnable)futures.get(i));\n            }\n\n            for (; j < size; j++) {\n                Future<T> f = futures.get(j);\n                if (!f.isDone()) {\n                    try { f.get(deadline - System.nanoTime(), NANOSECONDS); }\n                    catch (CancellationException | ExecutionException ignore) {}\n                    catch (TimeoutException timedOut) {\n                        break timedOut;\n                    }\n                }\n            }\n            return futures;\n        } catch (Throwable t) {\n            cancelAll(futures);\n            throw t;\n        }\n        // Timed out before all the tasks could be completed; cancel remaining\n        cancelAll(futures, j);\n        return futures;\n    }\n\n    private static <T> void cancelAll(ArrayList<Future<T>> futures) {\n        cancelAll(futures, 0);\n    }\n\n    private static <T> void cancelAll(ArrayList<Future<T>> futures, int j) {\n        for (int size = futures.size(); j < size; j++)\n            futures.get(j).cancel(true);\n    }\n}\n")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"ExecutorService")," \u7c7b\u7684\u62bd\u8c61\u5b9e\u73b0"),Object(a.b)("h2",{id:"threadpoolexecutor"},"ThreadPoolExecutor"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"ThreadPoolExecutor")," \u662f\u7ebf\u7a0b\u6c60\u7684\u6838\u5fc3\u5b9e\u73b0\u7c7b\uff0c\u7528\u6765\u6267\u884c\u88ab\u63d0\u4ea4\u7684\u4efb\u52a1"),Object(a.b)("h3",{id:"\u7ed3\u6784\u56fe"},"\u7ed3\u6784\u56fe"),Object(a.b)("p",null,Object(a.b)("img",{src:t(428).default})),Object(a.b)("h3",{id:"\u6267\u884c\u6d41\u7a0b"},"\u6267\u884c\u6d41\u7a0b"),Object(a.b)("p",null,Object(a.b)("img",{src:t(429).default})),Object(a.b)("h3",{id:"threadpoolexecutorclass"},"ThreadPoolExecutor.class"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public class ThreadPoolExecutor extends AbstractExecutorService {\n    \n    private final AtomicInteger ctl = new AtomicInteger(ctlOf(RUNNING, 0));\n\n    private final BlockingQueue<Runnable> workQueue;\n    private volatile ThreadFactory threadFactory;\n    private volatile RejectedExecutionHandler handler;\n    private volatile long keepAliveTime;\n    private volatile int corePoolSize;\n    private volatile int maximumPoolSize;\n    private static final RejectedExecutionHandler defaultHandler = new AbortPolicy();\n\n    private int largestPoolSize;\n\n    /**\n     * @param corePoolSize \u6838\u5fc3\u7ebf\u7a0b\u6570\n     * @param maximumPoolSize \u6700\u5927\u7ebf\u7a0b\u6570\n     * @param keepAliveTime \u7ebf\u7a0b\u6d3b\u52a8\u4fdd\u6301\u65f6\u95f4\n     * @param unit \u65f6\u95f4\u5355\u4f4d\n     * @param workQueue \u6392\u961f\u7b56\u7565\n     * @param threadFactory \u7ebf\u7a0b\u5de5\u5382\n     * @param handler \u62d2\u7edd\u7b56\u7565\n     */\n    public ThreadPoolExecutor(int corePoolSize,\n                              int maximumPoolSize,\n                              long keepAliveTime,\n                              TimeUnit unit,\n                              BlockingQueue<Runnable> workQueue,\n                              ThreadFactory threadFactory,\n                              RejectedExecutionHandler handler) {\n        if (corePoolSize < 0 ||\n            maximumPoolSize <= 0 ||\n            maximumPoolSize < corePoolSize ||\n            keepAliveTime < 0)\n            throw new IllegalArgumentException();\n        if (workQueue == null || threadFactory == null || handler == null)\n            throw new NullPointerException();\n        this.corePoolSize = corePoolSize;\n        this.maximumPoolSize = maximumPoolSize;\n        this.workQueue = workQueue;\n        this.keepAliveTime = unit.toNanos(keepAliveTime);\n        this.threadFactory = threadFactory;\n        this.handler = handler;\n    }\n\n    public void execute(Runnable command) {\n        if (command == null)\n            throw new NullPointerException();\n        /*\n         * Proceed in 3 steps:\n         *\n         * 1. If fewer than corePoolSize threads are running, try to\n         * start a new thread with the given command as its first\n         * task.  The call to addWorker atomically checks runState and\n         * workerCount, and so prevents false alarms that would add\n         * threads when it shouldn't, by returning false.\n         *\n         * 2. If a task can be successfully queued, then we still need\n         * to double-check whether we should have added a thread\n         * (because existing ones died since last checking) or that\n         * the pool shut down since entry into this method. So we\n         * recheck state and if necessary roll back the enqueuing if\n         * stopped, or start a new thread if there are none.\n         *\n         * 3. If we cannot queue task, then we try to add a new\n         * thread.  If it fails, we know we are shut down or saturated\n         * and so reject the task.\n         */\n        int c = ctl.get();\n        // \u5c0f\u4e8e\u6838\u5fc3\u7ebf\u7a0b\u6570\uff0c\u5219\u521b\u5efa\u7ebf\u7a0b\u5e76\u6267\u884c\u4efb\u52a1\n        if (workerCountOf(c) < corePoolSize) {\n            if (addWorker(command, true))\n                return;\n            c = ctl.get();\n        }\n        \n        // \u7ebf\u7a0b\u6570>=\u6838\u5fc3\u7ebf\u7a0b\u6570\uff0c\u5c06\u4efb\u52a1\u653e\u5165\u5de5\u4f5c\u961f\u5217\n        if (isRunning(c) && workQueue.offer(command)) {\n            int recheck = ctl.get();\n            if (! isRunning(recheck) && remove(command))\n                reject(command);\n            else if (workerCountOf(recheck) == 0)\n                addWorker(null, false);\n        }\n        // \u65e0\u6cd5\u653e\u5165\u5de5\u4f5c\u961f\u5217\uff0c\u6267\u884c\u62d2\u7edd\u7b56\u7565\n        else if (!addWorker(command, false))\n            reject(command);\n    }\n\n    private boolean addWorker(Runnable firstTask, boolean core) {\n        retry:\n        for (int c = ctl.get();;) {\n            // Check if queue empty only if necessary.\n            if (runStateAtLeast(c, SHUTDOWN)\n                    && (runStateAtLeast(c, STOP)\n                    || firstTask != null\n                    || workQueue.isEmpty()))\n                return false;\n\n            for (;;) {\n                if (workerCountOf(c)\n                    >= ((core ? corePoolSize : maximumPoolSize) & COUNT_MASK))\n                    return false;\n                if (compareAndIncrementWorkerCount(c))\n                    break retry;\n                c = ctl.get();  // Re-read ctl\n                if (runStateAtLeast(c, SHUTDOWN))\n                    continue retry;\n                // else CAS failed due to workerCount change; retry inner loop\n            }\n        }\n\n        // \u7ebf\u7a0b\u542f\u52a8\u6807\u5fd7\u4f4d\n        boolean workerStarted = false;\n        // \u7ebf\u7a0b\u662f\u5426\u52a0\u5165workers \u6807\u5fd7\u4f4d\n        boolean workerAdded = false;\n        Worker w = null;\n        try {\n            // \u521b\u5efa worker\n            w = new Worker(firstTask);\n            final Thread t = w.thread;\n            if (t != null) {\n                final ReentrantLock mainLock = this.mainLock;\n                mainLock.lock();\n                try {\n                    // \u83b7\u53d6\u5230\u9501\u4ee5\u540e\u4ecd\u9700\u68c0\u67e5ctl\uff0c\u53ef\u80fd\u5728\u4e0a\u4e00\u4e2a\u83b7\u53d6\u5230\u9501\u5904\u7406\u7684\u7ebf\u7a0b\u53ef\u80fd\u4f1a\u6539\u53d8runState\n                    // \u5982 ThreadFactory \u521b\u5efa\u5931\u8d25 \u6216\u7ebf\u7a0b\u6c60\u88ab shut down\u7b49\n                    int c = ctl.get();\n\n                    if (isRunning(c) ||\n                        (runStateLessThan(c, STOP) && firstTask == null)) {\n                        if (t.getState() != Thread.State.NEW)\n                            throw new IllegalThreadStateException();\n                        // \u52a0\u5165\u5230\u5de5\u4f5c\u961f\u5217\n                        workers.add(w);\n                        workerAdded = true;\n                        int s = workers.size();\n                        if (s > largestPoolSize)\n                            largestPoolSize = s;\n                    }\n                } finally {\n                    mainLock.unlock();\n                }\n                if (workerAdded) {\n                    // \u542f\u52a8\u7ebf\u7a0b\n                    t.start();\n                    // \u5df2\u542f\u52a8\n                    workerStarted = true;\n                }\n            }\n        } finally {\n            // \u7ebf\u7a0b\u52a0\u5165\u5931\u8d25\n            if (! workerStarted)\n                addWorkerFailed(w);\n        }\n        return workerStarted;\n    }\n\n    private static boolean isRunning(int c) {\n        return c < SHUTDOWN;\n    }\n\n    public boolean remove(Runnable task) {\n        boolean removed = workQueue.remove(task);\n        tryTerminate(); // In case SHUTDOWN and now empty\n        return removed;\n    }\n\n    // \u62d2\u7edd\u7b56\u7565\n    final void reject(Runnable command) {\n        handler.rejectedExecution(command, this);\n    }\n\n    public BlockingQueue<Runnable> getQueue() {\n        return workQueue;\n    }\n\n    public ThreadFactory getThreadFactory() {\n        return threadFactory;\n    }\n\n    // \u5173\u95ed\u7ebf\u7a0b\u6c60\n    public void shutdown() {\n        final ReentrantLock mainLock = this.mainLock;\n        mainLock.lock();\n        try {\n            checkShutdownAccess();\n            advanceRunState(SHUTDOWN);\n            interruptIdleWorkers();\n            onShutdown(); // hook for ScheduledThreadPoolExecutor\n        } finally {\n            mainLock.unlock();\n        }\n        tryTerminate();\n    }\n\n    private void interruptIdleWorkers() {\n        interruptIdleWorkers(false);\n    }\n\n    private void interruptIdleWorkers(boolean onlyOne) {\n        final ReentrantLock mainLock = this.mainLock;\n        mainLock.lock();\n        try {\n            // \u904d\u5386\u5de5\u4f5c\u961f\u5217\n            for (Worker w : workers) {\n                Thread t = w.thread;\n                if (!t.isInterrupted() && w.tryLock()) {\n                    try {\n                        t.interrupt();\n                    } catch (SecurityException ignore) {\n                    } finally {\n                        w.unlock();\n                    }\n                }\n                if (onlyOne)\n                    break;\n            }\n        } finally {\n            mainLock.unlock();\n        }\n    }\n\n    // \u6267\u884c\u4efb\u52a1\n    final void runWorker(Worker w) {\n        Thread wt = Thread.currentThread();\n        Runnable task = w.firstTask;\n        w.firstTask = null;\n        w.unlock(); // allow interrupts\n        boolean completedAbruptly = true;\n        try {\n            // loop \u76f4\u81f3 task = null \uff08\u7ebf\u7a0b\u6c60\u5173\u95ed\u3001\u8d85\u65f6\u7b49\uff09\n            while (task != null || (task = getTask()) != null) {\n                w.lock();\n                // If pool is stopping, ensure thread is interrupted;\n                // if not, ensure thread is not interrupted.  This\n                // requires a recheck in second case to deal with\n                // shutdownNow race while clearing interrupt\n                if ((runStateAtLeast(ctl.get(), STOP) ||\n                     (Thread.interrupted() &&\n                      runStateAtLeast(ctl.get(), STOP))) &&\n                    !wt.isInterrupted())\n                    wt.interrupt();\n                try {\n                    beforeExecute(wt, task);\n                    try {\n                        task.run();\n                        afterExecute(task, null);\n                    } catch (Throwable ex) {\n                        afterExecute(task, ex);\n                        throw ex;\n                    }\n                } finally {\n                    task = null;\n                    w.completedTasks++;\n                    w.unlock();\n                }\n            }\n            completedAbruptly = false;\n        } finally {\n            processWorkerExit(w, completedAbruptly);\n        }\n    }\n\n    // \u4ece\u5de5\u4f5c\u961f\u5217\u4e2d\u8fd4\u56de\u4e00\u4e2a\u4efb\u52a1\n    private Runnable getTask() {\n        // \u6700\u8fd1\u4e00\u6b21 poll() \u662f\u5426\u8d85\u65f6\n        boolean timedOut = false;\n\n        for (;;) {\n            int c = ctl.get();\n\n            // \u662f\u5426\u7ee7\u7eed\u5904\u7406\u4efb\u52a1\n            if (runStateAtLeast(c, SHUTDOWN) && (runStateAtLeast(c, STOP) || workQueue.isEmpty())) {\n                decrementWorkerCount();\n                return null;\n            }\n\n            int wc = workerCountOf(c);\n\n            // \u662f\u5426\u5141\u8bb8\u8d85\u65f6\n            boolean timed = allowCoreThreadTimeOut || wc > corePoolSize;\n\n            if ((wc > maximumPoolSize || (timed && timedOut))\n                && (wc > 1 || workQueue.isEmpty())) {\n                if (compareAndDecrementWorkerCount(c))\n                    return null;\n                continue;\n            }\n\n            try {\n                // \u53d6\u51fa\u4e00\u4e2a\u4efb\u52a1\n                Runnable r = timed ?\n                    workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) :\n                    workQueue.take();\n                if (r != null)\n                    return r;\n                timedOut = true;\n            } catch (InterruptedException retry) {\n                timedOut = false;\n            }\n        }\n    }\n\n    private void processWorkerExit(Worker w, boolean completedAbruptly) {\n        if (completedAbruptly) // If abrupt, then workerCount wasn't adjusted\n            decrementWorkerCount();\n\n        final ReentrantLock mainLock = this.mainLock;\n        mainLock.lock();\n        try {\n            completedTaskCount += w.completedTasks;\n            workers.remove(w);\n        } finally {\n            mainLock.unlock();\n        }\n\n        tryTerminate();\n\n        int c = ctl.get();\n        if (runStateLessThan(c, STOP)) {\n            if (!completedAbruptly) {\n                int min = allowCoreThreadTimeOut ? 0 : corePoolSize;\n                if (min == 0 && ! workQueue.isEmpty())\n                    min = 1;\n                if (workerCountOf(c) >= min)\n                    return; // replacement not needed\n            }\n            addWorker(null, false);\n        }\n    }\n\n    protected void beforeExecute(Thread t, Runnable r) { }\n    protected void afterExecute(Runnable r, Throwable t) { }\n}\n")),Object(a.b)("h3",{id:"worker"},"Worker"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"// Worker \u5b9e\u73b0\u4e86\u7b80\u5355\u7684 \u975e\u91cd\u5165\u4e92\u65a5\u9501\nprivate final class Worker\n        extends AbstractQueuedSynchronizer\n        implements Runnable\n{\n    private static final long serialVersionUID = 6138294804551838833L;\n\n    // \u6bcf\u4e2aworker\u6709\u81ea\u5df1\u7684\u5185\u90e8\u7ebf\u7a0b\uff0cThreadFactory\u521b\u5efa\u5931\u8d25\u65f6\u662fnull\n    final Thread thread;\n    // \u521d\u59cb\u5316\u4efb\u52a1\uff0c\u53ef\u80fd\u662fnull\n    Runnable firstTask;\n    // \u6bcf\u4e2aworker\u7684\u5b8c\u6210\u4efb\u52a1\u6570\n    volatile long completedTasks;\n\n    Worker(Runnable firstTask) {\n        //  // \u7981\u6b62\u7ebf\u7a0b\u5728\u542f\u52a8\u524d\u88ab\u6253\u65ad\n        setState(-1);\n        this.firstTask = firstTask;\n        // \u521b\u5efa\u7ebf\u7a0b\n        this.thread = getThreadFactory().newThread(this);\n    }\n\n    // \u6267\u884c\u65b9\u6cd5\n    public void run() {\n        runWorker(this);\n    }\n\n    // Lock methods\n    //\n    // The value 0 represents the unlocked state.\n    // The value 1 represents the locked state.\n    // state = 0 \u4ee3\u8868\u672a\u9501\uff1bstate = 1 \u4ee3\u8868\u5df2\u9501\n    protected boolean isHeldExclusively() {\n        return getState() != 0;\n    }\n\n    protected boolean tryAcquire(int unused) {\n        if (compareAndSetState(0, 1)) {\n            setExclusiveOwnerThread(Thread.currentThread());\n            return true;\n        }\n        return false;\n    }\n\n    protected boolean tryRelease(int unused) {\n        setExclusiveOwnerThread(null);\n        setState(0);\n        return true;\n    }\n\n    public void lock()        { acquire(1); }\n    public boolean tryLock()  { return tryAcquire(1); }\n    public void unlock()      { release(1); }\n    public boolean isLocked() { return isHeldExclusively(); }\n\n    void interruptIfStarted() {\n        Thread t;\n        if (getState() >= 0 && (t = thread) != null && !t.isInterrupted()) {\n            try {\n                t.interrupt();\n            } catch (SecurityException ignore) {\n            }\n        }\n    }\n}\n")),Object(a.b)("h3",{id:"\u62d2\u7edd\u7b56\u7565"},"\u62d2\u7edd\u7b56\u7565"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},'// \u58f0\u660e\u62d2\u7edd\u7b56\u7565\u63a5\u53e3\npublic interface RejectedExecutionHandler {\n    void rejectedExecution(Runnable r, ThreadPoolExecutor executor);\n}\n\npublic static class AbortPolicy implements RejectedExecutionHandler {\n    public AbortPolicy() { }\n    // \u76f4\u63a5\u629b\u51fa\u5f02\u5e38\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n        throw new RejectedExecutionException("Task " + r.toString() +\n                                                " rejected from " +\n                                                e.toString());\n    }\n}\n\npublic static class CallerRunsPolicy implements RejectedExecutionHandler {\n    public CallerRunsPolicy() { }\n    // \u53ea\u7528\u8c03\u7528\u8005\u6240\u5728\u7ebf\u7a0b\u6765\u8fd0\u884c\u4efb\u52a1\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n        if (!e.isShutdown()) {\n            r.run();\n        }\n    }\n}\n\npublic static class DiscardPolicy implements RejectedExecutionHandler {\n    public DiscardPolicy() { }\n    // \u4e0d\u505a\u5904\u7406\uff0c\u76f4\u63a5\u4e22\u5f03\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n    }\n}\n\npublic static class DiscardOldestPolicy implements RejectedExecutionHandler {\n    public DiscardOldestPolicy() { }\n    // \u4e22\u5f03\u5de5\u4f5c\u961f\u5217\u6700\u8fd1\u7684\u4e00\u4e2a\u4efb\u52a1\uff0c\u5e76\u6267\u884c\u5f53\u524d\u4efb\u52a1\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n        if (!e.isShutdown()) {\n            // \u79fb\u9664\u961f\u5217\u5934\u5143\u7d20\n            e.getQueue().poll();\n            // \u6267\u884c\u4efb\u52a1\n            e.execute(r);\n        }\n    }\n}\n')),Object(a.b)("h3",{id:"\u4efb\u52a1\u961f\u5217"},"\u4efb\u52a1\u961f\u5217"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"ArrayBlockingQueue \u57fa\u4e8e\u6570\u7ec4\u7ed3\u6784\u7684\u6709\u754c\u963b\u585e\u961f\u5217FIFO"),Object(a.b)("li",{parentName:"ul"},"LinkedBlockingQueue \u57fa\u4e8e\u94fe\u8868\u7ed3\u6784\u7684\u963b\u585e\u961f\u5217"),Object(a.b)("li",{parentName:"ul"},"SynchronousQueue \u4e0d\u5b58\u50a8\u5143\u7d20\u7684\u963b\u585e\u961f\u5217\uff0c\u6bcf\u4e2a\u63d2\u5165\u64cd\u4f5c\u5fc5\u987b\u7b49\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u79fb\u9664"),Object(a.b)("li",{parentName:"ul"},"PriorityBlockingQueue \u5177\u6709\u4f18\u5148\u7ea7\u7684\u65e0\u9650\u963b\u585e\u961f\u5217")),Object(a.b)("h3",{id:"\u5408\u7406\u7684\u914d\u7f6e\u7ebf\u7a0b\u6c60"},"\u5408\u7406\u7684\u914d\u7f6e\u7ebf\u7a0b\u6c60"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"CPU\u5bc6\u96c6\u578b N+1"),Object(a.b)("li",{parentName:"ul"},"IO\u5bc6\u96c6\u578b 2*N"),Object(a.b)("li",{parentName:"ul"},"\u6df7\u5408\u578b")),Object(a.b)("h2",{id:"executors"},"Executors"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},'// \u9ed8\u8ba4\u7684\u7ebf\u7a0b\u5de5\u5382\npublic static ThreadFactory defaultThreadFactory() {\n    return new DefaultThreadFactory();\n}\n\nprivate static class DefaultThreadFactory implements ThreadFactory {\n    private static final AtomicInteger poolNumber = new AtomicInteger(1);\n    private final ThreadGroup group;\n    private final AtomicInteger threadNumber = new AtomicInteger(1);\n    private final String namePrefix;\n\n    DefaultThreadFactory() {\n        SecurityManager s = System.getSecurityManager();\n        // \u7ebf\u7a0b\u7ec4\n        group = (s != null) ? s.getThreadGroup() : Thread.currentThread().getThreadGroup();\n        namePrefix = "pool-" +\n                        poolNumber.getAndIncrement() +\n                        "-thread-";\n    }\n\n    public Thread newThread(Runnable r) {\n        Thread t = new Thread(group, r,\n                                namePrefix + threadNumber.getAndIncrement(),\n                                0);\n        if (t.isDaemon())\n            t.setDaemon(false);\n        if (t.getPriority() != Thread.NORM_PRIORITY)\n            t.setPriority(Thread.NORM_PRIORITY);\n        return t;\n    }\n}\n')),Object(a.b)("h3",{id:"fixedthreadpool"},"FixedThreadPool"),Object(a.b)("p",null,"\u521b\u5efa\u5b9a\u957f\u7684\u7ebf\u7a0b\u6c60"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public static ExecutorService newFixedThreadPool(int nThreads) {\n    // \u6838\u5fc3\u7ebf\u7a0b\u6570\u548c\u6700\u5927\u7ebf\u7a0b\u6570\u76f8\u7b49\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7ebf\u7a0b\u5de5\u5382\uff0c\u57fa\u4e8e\u94fe\u8868\u7684\u963b\u585e\u961f\u5217, 0L:\u7a7a\u95f2\u7ebf\u7a0b\u4f1a\u7acb\u5373\u7ec8\u6b62\n    return new ThreadPoolExecutor(nThreads, nThreads,\n                                      0L, TimeUnit.MILLISECONDS,\n                                      new LinkedBlockingQueue<Runnable>());\n}\n")),Object(a.b)("h3",{id:"singlethreadexecutor"},"SingleThreadExecutor"),Object(a.b)("p",null,"\u521b\u5efa\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u6c60"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public static ExecutorService newSingleThreadExecutor() {\n    return new FinalizableDelegatedExecutorService\n        (new ThreadPoolExecutor(1, 1,\n                                0L, TimeUnit.MILLISECONDS,\n                                new LinkedBlockingQueue<Runnable>()));\n}\n")),Object(a.b)("h3",{id:"cachedthreadpool"},"CachedThreadPool"),Object(a.b)("p",null,"\u53ef\u7f13\u5b58\u7ebf\u7a0b\u6c60"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public static ExecutorService newCachedThreadPool() {\n    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                    60L, TimeUnit.SECONDS,\n                                    new SynchronousQueue<Runnable>());\n}\n")),Object(a.b)("h3",{id:"scheduledthreadpool"},"ScheduledThreadPool"),Object(a.b)("p",null,"\u521b\u5efa\u4e00\u4e2a\u5b9a\u957f\u7ebf\u7a0b\u6c60\uff0c\u652f\u6301\u5b9a\u65f6\u53ca\u5468\u671f\u6027\u4efb\u52a1\u6267\u884c"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize, \n        ThreadFactory threadFactory) {\n    return new ScheduledThreadPoolExecutor(corePoolSize, threadFactory);\n}\n")),Object(a.b)("h3",{id:"workstealingpool"},"WorkStealingPool"),Object(a.b)("p",null,"\u57fa\u4e8e\u5de5\u4f5c\u7a83\u53d6\u6a21\u5f0f\u7684\u7ebf\u7a0b\u6c60"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public static final ForkJoinWorkerThreadFactory defaultForkJoinWorkerThreadFactory \n        = new DefaultForkJoinWorkerThreadFactory();\n\npublic static ExecutorService newWorkStealingPool() {\n    return new ForkJoinPool\n        // \u9ed8\u8ba4cpu\u6838\u5fc3\u6570\n        (Runtime.getRuntime().availableProcessors(),\n            ForkJoinPool.defaultForkJoinWorkerThreadFactory,\n            null, true);\n}\n\n// \u6307\u5b9acpu\u6838\u5fc3\u6570\npublic static ExecutorService newWorkStealingPool(int parallelism) {\n    return new ForkJoinPool\n        (parallelism,\n            ForkJoinPool.defaultForkJoinWorkerThreadFactory,\n            null, true);\n}\n")),Object(a.b)("h2",{id:"forkjoin-\u6846\u67b6"},"Fork/Join \u6846\u67b6"),Object(a.b)("p",null,Object(a.b)("img",{src:t(430).default})),Object(a.b)("p",null,"\u6838\u5fc3\u601d\u60f3\u662f\u5c06\u5927\u7684\u4efb\u52a1\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u4efb\u52a1\uff08\u5373fork\uff09\uff0c\u7136\u540e\u5728\u5c06\u591a\u4e2a\u5c0f\u4efb\u52a1\u5904\u7406\u6c47\u603b\u5230\u4e00\u4e2a\u7ed3\u679c\u4e0a"),Object(a.b)("p",null,"\u63d0\u4f9b\u57fa\u672c\u7684\u7ebf\u7a0b\u6c60\u529f\u80fd\uff0c\u652f\u6301\u8bbe\u7f6e\u6700\u5927\u5e76\u53d1\u7ebf\u7a0b\u6570\uff0c\u652f\u6301\u4efb\u52a1\u6392\u961f\uff0c\u652f\u6301\u7ebf\u7a0b\u6c60\u505c\u6b62\uff0c\u652f\u6301\u7ebf\u7a0b\u6c60\u4f7f\u7528\u60c5\u51b5\u76d1\u63a7\uff0c\u4e5f\u662fAbstractExecutorService\u7684\u5b50\u7c7b\uff0c\u4e3b\u8981\u5f15\u5165\u4e86\u201c\u5de5\u4f5c\u7a83\u53d6\u201d\u673a\u5236\uff0c\u5728\u591aCPU\u8ba1\u7b97\u673a\u4e0a\u5904\u7406\u6027\u80fd\u66f4\u4f73"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"ForkJoinPool ")),Object(a.b)("p",null,"\u7528\u4e8e\u6267\u884cForkJoinTask\u4efb\u52a1\u7684\u6267\u884c\u6c60\uff0c \u7ef4\u62a4\u4e00\u4e2a\u961f\u5217\u6570\u7ec4WorkQueue"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"WorkQueue")),Object(a.b)("p",null,"\u53cc\u5411\u5217\u8868,\u7528\u4e8e\u4efb\u52a1\u7684\u6709\u5e8f\u6267\u884c,\u5982\u679cWorkQueue\u7528\u4e8e\u81ea\u5df1\u7684\u6267\u884c\u7ebf\u7a0bThread,\u7ebf\u7a0b\u9ed8\u8ba4\u5c06\u4f1a\u4ecetop\u7aef\u9009\u53d6\u4efb\u52a1\u7528\u6765\u6267\u884c - LIFO"),Object(a.b)("p",null,"\u56e0\u4e3a\u53ea\u6709owner\u7684Thread\u624d\u80fd\u4ecetop\u7aef\u53d6\u4efb\u52a1,\u6240\u4ee5\u5728\u8bbe\u7f6e\u53d8\u91cf\u65f6, int top; \u4e0d\u9700\u8981\u4f7f\u7528 volatile"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"ForkJoinWorkThread")),Object(a.b)("p",null,"\u7528\u4e8e\u6267\u884c\u4efb\u52a1\u7684\u7ebf\u7a0b,\u7528\u4e8e\u533a\u522b\u4f7f\u7528\u975eForkJoinWorkThread\u7ebf\u7a0b\u63d0\u4ea4\u7684task;\u542f\u52a8\u4e00\u4e2a\u8be5Thread,\u4f1a\u81ea\u52a8\u6ce8\u518c\u4e00\u4e2aWorkQueue\u5230Pool,\u8fd9\u91cc\u89c4\u5b9a,\u62e5\u6709Thread\u7684WorkQueue\u53ea\u80fd\u51fa\u73b0\u5728WorkQueue\u6570\u7ec4\u7684\u5947\u6570\u4f4d"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"ForkJoinTask")),Object(a.b)("p",null,"\u4efb\u52a1, \u5b83\u6bd4\u4f20\u7edf\u7684\u4efb\u52a1\u66f4\u52a0\u8f7b\u91cf\uff0c\u4e0d\u518d\u5bf9\u662fRUNNABLE\u7684\u5b50\u7c7b,\u63d0\u4f9bfork/join\u65b9\u6cd5\u7528\u4e8e\u5206\u5272\u4efb\u52a1\u4ee5\u53ca\u805a\u5408\u7ed3\u679c"),Object(a.b)("h3",{id:"work-stealing-\u5de5\u4f5c\u7a83\u53d6\u7b97\u6cd5"},"Work-Stealing \u5de5\u4f5c\u7a83\u53d6\u7b97\u6cd5"),Object(a.b)("h3",{id:"forkjointask"},"ForkJoinTask"),Object(a.b)("p",null,"ForkJoinTask\u9700\u8981\u901a\u8fc7ForkJoinPool\u6765\u6267\u884c"),Object(a.b)("p",null,"ForkJoinTask\u53ef\u4ee5\u7406\u89e3\u4e3a\u7c7b\u7ebf\u7a0b\u4f46\u6bd4\u7ebf\u7a0b\u8f7b\u91cf\u7684\u5b9e\u4f53, \u5728ForkJoinPool\u4e2d\u8fd0\u884c\u7684\u5c11\u91cfForkJoinWorkerThread\u53ef\u4ee5\u6301\u6709\u5927\u91cf\u7684ForkJoinTask\u548c\u5b83\u7684\u5b50\u4efb\u52a1."),Object(a.b)("p",null,"ForkJoinTask\u540c\u65f6\u4e5f\u662f\u4e00\u4e2a\u8f7b\u91cf\u7684Future,\u4f7f\u7528\u65f6\u5e94\u907f\u514d\u8f83\u957f\u963b\u585e\u548cio"),Object(a.b)("p",null,"\u4f7f\u7528ForkJoin\u6846\u67b6\uff0c\u5fc5\u987b\u9996\u5148\u521b\u5efa\u4e00\u4e2aForkJoin\u4efb\u52a1\uff0c\u63d0\u4f9b\u5728\u4efb\u52a1\u4e2d\u6267\u884cfork()\u548cjoin()\u64cd\u4f5c\u7684\u673a\u5236."),Object(a.b)("p",null,"\u5b50\u7c7b:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"RecursiveAction \u7528\u4e8e\u6ca1\u6709\u8fd4\u56de\u7ed3\u679c\u7684\u4efb\u52a1"),Object(a.b)("li",{parentName:"ul"},"RecursiveTask \u7528\u4e8e\u6709\u8fd4\u56de\u7ed3\u679c\u7684\u4efb\u52a1\u3002")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"Recursive ","[r\u026a\u02c8k\u025c\u02d0s\u026av]")),Object(a.b)("h4",{id:"recursivetaskclass"},"RecursiveTask.class"),Object(a.b)("p",null,"\u6709\u8fd4\u56de\u503c"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public abstract class RecursiveTask<V> extends ForkJoinTask<V> {\n    private static final long serialVersionUID = 5232453952276485270L;\n\n    /**\n     * The result of the computation.\n     */\n    V result;\n\n    // \u5b50\u7c7b\u91cd\u5199\u6b64\u65b9\u6cd5\n    protected abstract V compute();\n\n    public final V getRawResult() {\n        return result;\n    }\n\n    protected final void setRawResult(V value) {\n        result = value;\n    }\n\n    protected final boolean exec() {\n        result = compute();\n        return true;\n    }\n\n}\n")),Object(a.b)("h4",{id:"recursiveactionclass"},"RecursiveAction.class"),Object(a.b)("p",null,"\u6ca1\u6709\u8fd4\u56de\u503c"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public abstract class RecursiveAction extends ForkJoinTask<Void> {\n    protected abstract void compute();\n    public final Void getRawResult() { return null; }\n\n    protected final void setRawResult(Void mustBeNull) { }\n\n    protected final boolean exec() {\n        compute();\n        return true;\n    }\n}\n")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"RecursiveAction")," \u548c ",Object(a.b)("inlineCode",{parentName:"p"},"RecursiveTask")),Object(a.b)("h4",{id:"forkjointaskclass"},"ForkJoinTask.class"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},"public abstract class ForkJoinTask<V> implements Future<V>, Serializable {\n    volatile int status;\n\n    // \u5206\u5272\u51fd\u6570\n    public final ForkJoinTask<V> fork() {\n        Thread t;\n        if ((t = Thread.currentThread()) instanceof ForkJoinWorkerThread)\n            // \u653e\u5165\u961f\u5217\n            ((ForkJoinWorkerThread)t).workQueue.push(this);\n        else\n            ForkJoinPool.common.externalPush(this);\n        return this;\n    }\n\n    public final V join() {\n        int s;\n        if (((s = doJoin()) & ABNORMAL) != 0)\n            reportException(s);\n        return getRawResult();\n    }\n\n    public abstract V getRawResult();\n\n    // \u83b7\u53d6\u5f53\u524d\u4efb\u52a1\u7684\u72b6\u6001\u6765\u5224\u65ad\u8fd4\u56de\u4ec0\u4e48\u7ed3\u679c\n    private int doJoin() {\n        int s; Thread t; ForkJoinWorkerThread wt; ForkJoinPool.WorkQueue w;\n\n        // \u5982\u679c\u6267\u884c\u5b8c\u6bd5\uff0c\u8fd4\u56de\u4efb\u52a1\u72b6\u6001\n        return (s = status) < 0 ? s :\n            ((t = Thread.currentThread()) instanceof ForkJoinWorkerThread) ?\n            // \u4ece\u4efb\u52a1\u6570\u7ec4\u91cc\u53d6\u51fa\u4efb\u52a1\u6267\u884c\n            (w = (wt = (ForkJoinWorkerThread)t).workQueue).\n            tryUnpush(this) && (s = doExec()) < 0 ? s :\n            // \n            wt.pool.awaitJoin(w, this, 0L) :\n            externalAwaitDone();\n    }\n\n    final int doExec() {\n        int s; boolean completed;\n        if ((s = status) >= 0) {\n            try {\n                completed = exec();\n            } catch (Throwable rex) {\n                completed = false;\n                s = setExceptionalCompletion(rex);\n            }\n            if (completed)\n                s = setDone();\n        }\n        return s;\n    }\n\n    protected abstract boolean exec();\n\n    private int setDone() {\n        int s;\n        if (((s = (int)STATUS.getAndBitwiseOr(this, DONE)) & SIGNAL) != 0)\n            synchronized (this) { notifyAll(); }\n        return s | DONE;\n    }\n\n    // \u9002\u914d\u5668\n    static final class RunnableExecuteAction extends ForkJoinTask<Void> {\n        final Runnable runnable;\n        RunnableExecuteAction(Runnable runnable) {\n            if (runnable == null) throw new NullPointerException();\n            this.runnable = runnable;\n        }\n        public final Void getRawResult() { return null; }\n        public final void setRawResult(Void v) { }\n        public final boolean exec() { runnable.run(); return true; }\n        void internalPropagateException(Throwable ex) {\n            rethrow(ex); // rethrow outside exec() catches.\n        }\n        private static final long serialVersionUID = 5232453952276885070L;\n    }\n}\n")),Object(a.b)("h3",{id:"forkjoinpoolclass"},"ForkJoinPool.class"),Object(a.b)("p",null,"ForkJoinTask\u9700\u8981\u901a\u8fc7ForkJoinPool\u6765\u6267\u884c\uff0c\u4efb\u52a1\u5206\u5272\u51fa\u7684\u5b50\u4efb\u52a1\u4f1a\u6dfb\u52a0\u5230\u5f53\u524d\u5de5\u4f5c\u7ebf\u7a0b\u6240\u7ef4\u62a4\u7684\u53cc\u7aef\u961f\u5217\u4e2d\uff0c\u8fdb\u5165\u961f\u5217\u7684\u5934\u90e8"),Object(a.b)("h4",{id:"\u7ed3\u6784\u56fe-1"},"\u7ed3\u6784\u56fe"),Object(a.b)("p",null,Object(a.b)("img",{src:t(431).default})),Object(a.b)("h4",{id:"\u539f\u7406"},"\u539f\u7406"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},'public class ForkJoinPool extends AbstractExecutorService {\n    public static interface ForkJoinWorkerThreadFactory {\n        public ForkJoinWorkerThread newThread(ForkJoinPool pool);\n    }\n\n    // \u7ebf\u7a0b\u5de5\u5382\n    private static final class DefaultForkJoinWorkerThreadFactory implements ForkJoinWorkerThreadFactory {\n\n        private static final AccessControlContext ACC = contextWithPermissions(\n            new RuntimePermission("getClassLoader"),\n            new RuntimePermission("setContextClassLoader"));\n\n        // \u521b\u5efa ForkJoinWorkerThread \u7ebf\u7a0b\n        public final ForkJoinWorkerThread newThread(ForkJoinPool pool) {\n            return AccessController.doPrivileged(\n                new PrivilegedAction<>() {\n                    public ForkJoinWorkerThread run() {\n                        return new ForkJoinWorkerThread(\n                            pool, ClassLoader.getSystemClassLoader()); }},\n                ACC);\n        }\n    }\n\n    // \u5de5\u4f5c\u961f\u5217\n    @jdk.internal.vm.annotation.Contended\n    static final class WorkQueue {\n\n        final void push(ForkJoinTask<?> task) {\n            ForkJoinTask<?>[] a;\n            int s = top, d, cap, m;\n            ForkJoinPool p = pool;\n            if ((a = array) != null && (cap = a.length) > 0) {\n                // \u653e\u5165ForkJoinTask\u6570\u7ec4\u961f\u5217\u91cc\n                QA.setRelease(a, (m = cap - 1) & s, task);\n                top = s + 1;\n                if (((d = s - (int)BASE.getAcquire(this)) & ~1) == 0 && p != null) {                 // size 0 or 1\n                    VarHandle.fullFence();\n                    // \u5524\u9192\u6216\u521b\u5efa\u4e00\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1\n                    p.signalWork();\n                }\n                else if (d == m)\n                    growArray(false);\n            }\n        }\n    }\n\n    public void execute(ForkJoinTask<?> task) {\n        externalSubmit(task);\n    }\n\n    public void execute(Runnable task) {\n        if (task == null)\n            throw new NullPointerException();\n        ForkJoinTask<?> job;\n        if (task instanceof ForkJoinTask<?>) // avoid re-wrap\n            job = (ForkJoinTask<?>) task;\n        else\n            // \u8f6c\u6362\u6210 ForkJoinTask\n            job = new ForkJoinTask.RunnableExecuteAction(task);\n        externalSubmit(job);\n    }\n\n    private <T> ForkJoinTask<T> externalSubmit(ForkJoinTask<T> task) {\n        Thread t; ForkJoinWorkerThread w; WorkQueue q;\n        if (task == null)\n            throw new NullPointerException();\n        if (((t = Thread.currentThread()) instanceof ForkJoinWorkerThread) &&\n            (w = (ForkJoinWorkerThread)t).pool == this &&\n            (q = w.workQueue) != null)\n            // \u653e\u5165\u5de5\u4f5c\u961f\u5217\u4e2d\n            q.push(task);\n        else\n            externalPush(task);\n        return task;\n    }\n\n    final void externalPush(ForkJoinTask<?> task) {\n        int r;                                // initialize caller\'s probe\n        if ((r = ThreadLocalRandom.getProbe()) == 0) {\n            ThreadLocalRandom.localInit();\n            r = ThreadLocalRandom.getProbe();\n        }\n        for (;;) {\n            WorkQueue q;\n            int md = mode, n;\n            WorkQueue[] ws = workQueues;\n            if ((md & SHUTDOWN) != 0 || ws == null || (n = ws.length) <= 0)\n                throw new RejectedExecutionException();\n            else if ((q = ws[(n - 1) & r & SQMASK]) == null) { // add queue\n                int qid = (r | QUIET) & ~(FIFO | OWNED);\n                Object lock = workerNamePrefix;\n                ForkJoinTask<?>[] qa =\n                    new ForkJoinTask<?>[INITIAL_QUEUE_CAPACITY];\n                q = new WorkQueue(this, null);\n                q.array = qa;\n                q.id = qid;\n                q.source = QUIET;\n                if (lock != null) {     // unless disabled, lock pool to install\n                    synchronized (lock) {\n                        WorkQueue[] vs; int i, vn;\n                        if ((vs = workQueues) != null && (vn = vs.length) > 0 &&\n                            vs[i = qid & (vn - 1) & SQMASK] == null)\n                            vs[i] = q;  // else another thread already installed\n                    }\n                }\n            }\n            else if (!q.tryLockPhase()) // move if busy\n                r = ThreadLocalRandom.advanceProbe(r);\n            else {\n                if (q.lockedPush(task))\n                    signalWork();\n                return;\n            }\n        }\n    }\n\n    // \u5524\u9192\u6216\u521b\u5efa\u4e00\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1\n    final void signalWork() {\n        for (;;) {\n            long c; int sp; WorkQueue[] ws; int i; WorkQueue v;\n            if ((c = ctl) >= 0L)                      // enough workers\n                break;\n            else if ((sp = (int)c) == 0) {            // no idle workers\n                if ((c & ADD_WORKER) != 0L)           // too few workers\n                    tryAddWorker(c);\n                break;\n            }\n            else if ((ws = workQueues) == null)\n                break;                                // unstarted/terminated\n            else if (ws.length <= (i = sp & SMASK))\n                break;                                // terminated\n            else if ((v = ws[i]) == null)\n                break;                                // terminating\n            else {\n                int np = sp & ~UNSIGNALLED;\n                int vp = v.phase;\n                long nc = (v.stackPred & SP_MASK) | (UC_MASK & (c + RC_UNIT));\n                Thread vt = v.owner;\n                if (sp == vp && CTL.compareAndSet(this, c, nc)) {\n                    v.phase = np;\n                    if (vt != null && v.source < 0)\n                        // \u5524\u9192\u5de5\u4f5c\u7ebf\u7a0b\n                        LockSupport.unpark(vt);\n                    break;\n                }\n            }\n        }\n    }\n\n    private void tryAddWorker(long c) {\n        do {\n            long nc = ((RC_MASK & (c + RC_UNIT)) |\n                       (TC_MASK & (c + TC_UNIT)));\n            if (ctl == c && CTL.compareAndSet(this, c, nc)) {\n                createWorker();\n                break;\n            }\n        } while (((c = ctl) & ADD_WORKER) != 0L && (int)c == 0);\n    }\n\n    // \u521b\u5efa\u5de5\u4f5c\u7ebf\u7a0b\n    private boolean createWorker() {\n        ForkJoinWorkerThreadFactory fac = factory;\n        Throwable ex = null;\n        ForkJoinWorkerThread wt = null;\n        try {\n            if (fac != null && (wt = fac.newThread(this)) != null) {\n                wt.start();\n                return true;\n            }\n        } catch (Throwable rex) {\n            ex = rex;\n        }\n        deregisterWorker(wt, ex);\n        return false;\n    }\n\n    final void runWorker(WorkQueue w) {\n        int r = (w.id ^ ThreadLocalRandom.nextSecondarySeed()) | FIFO; // rng\n        w.array = new ForkJoinTask<?>[INITIAL_QUEUE_CAPACITY]; // initialize\n        for (;;) {\n            int phase;\n            if (scan(w, r)) {                     // scan until apparently empty\n                r ^= r << 13; r ^= r >>> 17; r ^= r << 5; // move (xorshift)\n            }\n            else if ((phase = w.phase) >= 0) {    // enqueue, then rescan\n                long np = (w.phase = (phase + SS_SEQ) | UNSIGNALLED) & SP_MASK;\n                long c, nc;\n                do {\n                    w.stackPred = (int)(c = ctl);\n                    nc = ((c - RC_UNIT) & UC_MASK) | np;\n                } while (!CTL.weakCompareAndSet(this, c, nc));\n            }\n            else {                                // already queued\n                int pred = w.stackPred;\n                Thread.interrupted();             // clear before park\n                w.source = DORMANT;               // enable signal\n                long c = ctl;\n                int md = mode, rc = (md & SMASK) + (int)(c >> RC_SHIFT);\n                if (md < 0)                       // terminating\n                    break;\n                else if (rc <= 0 && (md & SHUTDOWN) != 0 &&\n                         tryTerminate(false, false))\n                    break;                        // quiescent shutdown\n                else if (rc <= 0 && pred != 0 && phase == (int)c) {\n                    long nc = (UC_MASK & (c - TC_UNIT)) | (SP_MASK & pred);\n                    long d = keepAlive + System.currentTimeMillis();\n                    LockSupport.parkUntil(this, d);\n                    if (ctl == c &&               // drop on timeout if all idle\n                        d - System.currentTimeMillis() <= TIMEOUT_SLOP &&\n                        CTL.compareAndSet(this, c, nc)) {\n                        w.phase = QUIET;\n                        break;\n                    }\n                }\n                else if (w.phase < 0)\n                    LockSupport.park(this);       // OK if spuriously woken\n                w.source = 0;                     // disable signal\n            }\n        }\n    }\n}\n')),Object(a.b)("h4",{id:"forkjoinworkerthreadclass"},"ForkJoinWorkerThread.class"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-java"},'public class ForkJoinWorkerThread extends Thread {\n    final ForkJoinPool pool;\n    final ForkJoinPool.WorkQueue workQueue;\n\n    protected ForkJoinWorkerThread(ForkJoinPool pool) {\n        super("aForkJoinWorkerThread");\n        this.pool = pool;\n        this.workQueue = pool.registerWorker(this);\n    }\n\n    public ForkJoinPool getPool() {\n        return pool;\n    }\n\n    public int getPoolIndex() {\n        return workQueue.getPoolIndex();\n    }\n\n    public void run() {\n        if (workQueue.array == null) { // only run once\n            Throwable exception = null;\n            try {\n                onStart();\n                pool.runWorker(workQueue);\n            } catch (Throwable ex) {\n                exception = ex;\n            } finally {\n                try {\n                    onTermination(exception);\n                } catch (Throwable ex) {\n                    if (exception == null)\n                        exception = ex;\n                } finally {\n                    pool.deregisterWorker(this, exception);\n                }\n            }\n        }\n    }\n\n    protected void onStart() {\n    }\n\n    protected void onTermination(Throwable exception) {\n    }\n}\n')))}s.isMDXComponent=!0},270:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return k}));var r=t(0),o=t.n(r);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=o.a.createContext({}),s=function(e){var n=o.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=s(e.components);return o.a.createElement(u.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},p=o.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=s(t),p=r,k=d["".concat(l,".").concat(p)]||d[p]||b[p]||a;return t?o.a.createElement(k,i(i({ref:n},u),{},{components:t})):o.a.createElement(k,i({ref:n},u))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,l=new Array(a);l[0]=p;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<a;u++)l[u]=t[u];return o.a.createElement.apply(null,l)}return o.a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},290:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/java-7-concurrent-executors-uml-class-diagram-example-5a060fcf244bf15c9a95fb91837c8677.png"},428:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/ThreadPoolExecutor-c4504db2cc35911ed2d6b509a8077f2d.png"},429:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/11183270-a01aea078d7f4178-c08184849bd69b9c718e15b36385fd9b.png"},430:function(e,n,t){"use strict";t.r(n),n.default="data:image/png;base64,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"},431:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/ForkJoinPool-3b05ea1df1f35925d1c98b81c7676d79.png"}}]);